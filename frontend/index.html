<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grabador de Audio</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            margin: 0; /* Elimina los márgenes predeterminados del cuerpo */
            overflow: hidden;
        }

        .Logo {
            position: fixed;
            top: 0;
            left: 0;
            
        }

        img#micButton {
            max-width: 11%; /* Ajusta el tamaño de la imagen con id "micButton" */
            cursor: pointer;
            position: fixed;
            top: 180px;
            left: -20px;
        }

        img /* LOGO*/ {
            max-width: 70%;
            cursor: pointer;
            margin-top: 30px;
        }

        body {
            background-color: black;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            color: white;
            font-family: Arial, sans-serif;
        }
        
        #transcriptionContainer {
            margin-top: 30px;
            text-align: center;
        }
        
        #imageContainer {
            max-width: 100%; /* La imagen se ajustará al ancho máximo del contenedor */
            height: auto;
            text-align: center;
        }

        /*PARA EL BOTON SALIR*/
        body {
        margin: 0;
        padding: 0;
        }

        #salirButton {
         position: fixed;
        top: 10px;
        right: 40px;
        }   

        /* Estilo del modal */
        #modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            background-color: white;
            color: black;
            text-align: center;
            z-index: 1000;
        }

        /* Fondo oscuro detrás del modal */
        #modalBackground {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        #loadingMessage {
            display: none;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <!-- <header>
        <a class="Logo" href="https://citylabbiobio.cl/" target="_blank">
            <img src="assets/images/logo.png" alt="Logo">
        </a>
    </header> -->

    <img src="./assets/images/microphone.png" id="micButton" onclick="toggleLoading()">
    <div id="transcriptionContainer"></div> <!-- Contenedor para la transcripción -->
    <div id="imageContainer"></div> <!-- Contenedor para la imagen generada -->
    <div id="loadingMessage">Cargando...</div>

    <!-- botón para hacer click en SALIR-->
    <button id="salirButton">Salir</button>

     <!-- Modal de confirmación -->
     <div id="modalBackground"></div>
     <div id="modal">
         <p>¿Estás seguro de que quieres salir?</p>
         <button id="salirButtonModal">Sí</button>
         <button id="cancelarSalir">No</button>
     </div>
   
    <!--FUNCIONES JAVASCRIPT-->
    <script src="./scripts/js_/script.js"></script>
    <script>
        // var micButton = document.querySelector('.micButton');
        //     micButton.addEventListener('click', () => {
        //     micButton.classList.toggle('clicked'); // Alternar la clase "clicked" en cada clic
        // });


         // Obtener el botón de salir
         const salirButton = document.getElementById('salirButtonModal');

        // Obtener los elementos del modal
        const modalBackground = document.getElementById('modalBackground');
        const modal = document.getElementById('modal');
        const confirmarSalirButton = document.getElementById('salirButtonModal');
        const cancelarSalirButton = document.getElementById('cancelarSalir');

        // Función para mostrar el modal
        function mostrarModal() {
            modalBackground.style.display = 'block';
            modal.style.display = 'block';
            // Asocia el evento al botón dentro del modal
            const salirModalButton = document.getElementById('salirButtonModal');
            salirModalButton.addEventListener('click', confirmarSalir);
            cancelarSalirButton.addEventListener('click', ocultarModal);
        }

        // Función para ocultar el modal
        function ocultarModal() {
            modalBackground.style.display = 'none';
            modal.style.display = 'none';
        }

        // Función para confirmar salir y cerrar la pestaña
        function confirmarSalir() {
            // Cerrar la pestaña
            window.location.href = 'about:blank';
        }

        // Agregar un evento al botón de salir para mostrar el modal
        salirButton.addEventListener('click', mostrarModal);

        // Agregar eventos a los botones del modal
        salirButton.addEventListener('click', mostrarModal);
        confirmarSalirButton.addEventListener('click', confirmarSalir);
        cancelarSalirButton.addEventListener('click', ocultarModal);
    
        let clickCount = 0;

        function toggleLoading() {
            clickCount++;

            if (clickCount === 2) {
                const loadingMessage = document.getElementById('loadingMessage');
                loadingMessage.style.display = 'block';
            }
        }
        
    
    </script>
</body>
</html>
